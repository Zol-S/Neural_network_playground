<div class="container-fluid">
	<div class="row">
		<div class="col col-lg-12">
			<h5>CNN activation maximizer</h5>
			Inspired by <a href="https://keras.io/examples/vision/visualizing_what_convnets_learn/" target="_blank">Visualizing what convnets learn</a> by <i>Fran√ßois Chollet</i>. MNIST Tensorflow model is loaded initially. Click on <i>Generate</i> button to generate a noisy image. Click on any of the convolutional or pooling layer filters to select the filter that you wish to maximize, then click on <i>Maximize</i> button to start the find the input image that maximizes the selected filter.
		</div>
	</div>
	<div class="row">
		<div class="col col-lg-3">
			<div id="accordion">
				<!-- Model -->
				<div class="card">
					<div class="card-header" id="heading_model">
						<h5 class="mb-0">
							<button class="btn btn-link" data-toggle="collapse" data-target="#collapse_model">Model</button>
						</h5>
					</div>

					<div id="collapse_model" class="collapse show" data-parent="#accordion">
						<div class="card-body">

							<label for="fps_selector">Model:</label>
							<select class="form-control" id="model_selector">
								<option></option>
								<option value="mnist_28x28">MNIST (725 kB)</option>
							</select><br/>

							<p id="model_description"></p>
						</div>
					</div>
				</div>

				<!-- Activation map -->
				<div class="card">
					<div class="card-header" id="heading_activation_map">
						<h5 class="mb-0">
							<button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse_activation_map">Activation map</button>
						</h5>
					</div>

					<div id="collapse_activation_map" class="collapse" data-parent="#accordion">
						<div class="card-body">

							<p>
								<button id="generate_btn" type="button" class="btn btn-primary">Generate noisy input</button>
							</p>
							<p>
								Number of iterations: <input id="iteration_counter" type="number" min="1" max="20" value="10"><br/>
								<button id="start_btn" type="button" class="btn btn-primary">Start</button>
							</p>
							
							
							<div class="progress" id="progress_bar">
								<div class="progress-bar progress-bar-striped" role="progressbar" style="width: 0%"></div>
							</div>
						</div>
					</div>
				</div>

				<!-- Prediction -->
				<div class="card">
					<div class="card-header" id="heading_prediction">
						<h5 class="mb-0">
							<button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse_prediction">Prediction</button>
						</h5>
					</div>

					<div id="collapse_prediction" class="collapse" data-parent="#accordion">
						<div class="card-body">

							Prediction time: <i id="prediction_time"></i><br/>
							Output:<br/>
							<div id="prediction"></div>

						</div>
					</div>
				</div>
			</div>

			<!-- Feature map -->
			<!--p>
				Layer name: <i id="selected_layer_name"></i><br/>
				Layer index: <i id="selected_layer_index"></i><br/>
				Filter index: <i id="selected_filter_index"></i><br/>
				Filter size: <i id="selected_filter_size"></i><br/>
				Filter number: <i id="selected_filter_number"></i>
			</p>
			<canvas id="feature_map"></canvas>
			<canvas id="feature_map_check"></canvas>

			<p>
				Loss: <i id="loss"></i>
			</p-->
		</div>

		<div class="col col-lg-9" id="layer_container">
			<div class="card bg-light mb-3">
				<div class="card-header">Input image: <span id="input_image_header"></span></div>
				<div class="card-body">
					<p class="card-text">
						<!-- Grayscale canvas -->
						<canvas id="input_bw"></canvas>
						<canvas id="input_bw_big" width="200" height="200" class="input_canvas"></canvas>
					</p>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- https://fairyonice.github.io/achieving-top-23-in-kaggles-facial-keypoints-detection-with-keras-tensorflow.html -->