define([
	'jquery',
	'underscore',
	'backbonejs',
	'text!backbone/templates/pooling.html',
	'bootstrap'
], function ($, _, Backbone, PoolingTemplate) {
	'use strict';

	var view = Backbone.View.extend({
		el: '#main',
		events: {
			'click #change_btn': 'onChangeClicked'
		},
		mnist_digit_width: 28,
		mnist_digits: [
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2,0.624,0.992,0.624,0.196,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.188,0.933,0.988,0.988,0.988,0.929,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.212,0.89,0.992,0.988,0.937,0.914,0.988,0.224,0.024,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.039,0.235,0.878,0.988,0.992,0.988,0.792,0.329,0.988,0.992,0.478,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.639,0.988,0.988,0.988,0.992,0.988,0.988,0.376,0.741,0.992,0.655,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2,0.933,0.992,0.992,0.745,0.447,0.992,0.894,0.184,0.31,1,0.659,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.188,0.933,0.988,0.988,0.702,0.047,0.294,0.475,0.082,0,0,0.992,0.953,0.196,0,0,0,0,0,0,0,0,0,0,0,0,0,0.149,0.647,0.992,0.914,0.816,0.329,0,0,0,0,0,0,0.992,0.988,0.647,0,0,0,0,0,0,0,0,0,0,0,0,0.027,0.698,0.988,0.941,0.278,0.075,0.11,0,0,0,0,0,0,0.992,0.988,0.765,0,0,0,0,0,0,0,0,0,0,0,0,0.224,0.988,0.988,0.247,0,0,0,0,0,0,0,0,0,0.992,0.988,0.765,0,0,0,0,0,0,0,0,0,0,0,0,0.776,0.992,0.745,0,0,0,0,0,0,0,0,0,0,1,0.992,0.769,0,0,0,0,0,0,0,0,0,0,0,0.298,0.965,0.988,0.439,0,0,0,0,0,0,0,0,0,0,0.992,0.988,0.58,0,0,0,0,0,0,0,0,0,0,0,0.333,0.988,0.902,0.098,0,0,0,0,0,0,0,0,0.027,0.529,0.992,0.729,0.047,0,0,0,0,0,0,0,0,0,0,0,0.333,0.988,0.875,0,0,0,0,0,0,0,0,0.027,0.514,0.988,0.882,0.278,0,0,0,0,0,0,0,0,0,0,0,0,0.333,0.988,0.569,0,0,0,0,0,0,0,0.188,0.647,0.988,0.678,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.337,0.992,0.882,0,0,0,0,0,0,0.447,0.933,0.992,0.635,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.333,0.988,0.976,0.573,0.188,0.114,0.333,0.698,0.882,0.992,0.875,0.655,0.22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.333,0.988,0.988,0.988,0.898,0.843,0.988,0.988,0.988,0.769,0.51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.11,0.78,0.988,0.988,0.992,0.988,0.988,0.914,0.569,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.098,0.502,0.988,0.992,0.988,0.553,0.145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 0
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.486,0.992,1,0.247,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.376,0.957,0.984,0.992,0.243,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.498,0.984,0.984,0.992,0.243,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.267,0.925,0.984,0.827,0.122,0.031,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.235,0.894,0.984,0.984,0.369,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.608,0.992,0.992,0.741,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.078,0.992,0.984,0.922,0.259,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.125,0.804,0.992,0.984,0.494,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.408,0.984,0.992,0.722,0.059,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.314,0.941,0.984,0.757,0.09,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.125,0.992,0.992,0.992,0.624,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.592,0.984,0.984,0.984,0.153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.188,0.867,0.984,0.984,0.675,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.918,0.984,0.984,0.769,0.047,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.992,0.984,0.984,0.349,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.624,1,0.992,0.992,0.122,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.188,0.894,0.992,0.969,0.549,0.031,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.251,0.984,0.992,0.863,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.251,0.984,0.992,0.863,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.094,0.757,0.992,0.863,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 1
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.051,0.098,0.392,0.478,0.027,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.129,0.592,0.816,0.988,0.988,0.988,0.573,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.157,0.596,0.957,0.988,0.992,0.878,0.827,0.988,0.91,0.157,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.059,0.596,0.937,0.988,0.988,0.988,0.847,0.122,0.145,0.988,0.988,0.235,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.376,0.988,0.988,0.988,0.988,0.851,0.114,0,0.145,0.988,0.988,0.235,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.71,0.988,0.988,0.863,0.655,0.118,0,0,0.302,0.988,0.988,0.235,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.102,0.502,0.227,0.086,0,0,0,0,0.392,0.988,0.988,0.235,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.616,0.988,0.988,0.235,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.431,0.475,0.478,0.475,0.792,0.988,0.761,0.012,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.039,0.208,0.702,0.992,0.992,1,0.992,0.992,0.894,0.137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.02,0.212,0.89,0.988,0.953,0.894,0.667,0.949,0.988,0.988,0.906,0.459,0.024,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.024,0.306,0.988,0.988,0.49,0.231,0,0.071,0.816,0.988,0.988,0.988,0.988,0.341,0.027,0,0,0,0,0,0,0,0,0,0,0,0,0.02,0.529,0.988,0.988,0.706,0.063,0,0.082,0.796,0.992,0.969,0.506,0.678,0.988,0.988,0.722,0.259,0.192,0.192,0,0,0,0,0,0,0,0,0.012,0.533,0.988,0.945,0.416,0.067,0,0.208,0.784,0.988,0.847,0.255,0,0.055,0.282,0.639,0.945,0.988,0.988,0.875,0,0,0,0,0,0,0,0,0.412,0.988,0.949,0.345,0.071,0.286,0.667,0.957,0.988,0.494,0.114,0,0,0,0,0,0.349,0.706,0.706,0.145,0,0,0,0,0,0,0,0,0.906,0.988,0.961,0.804,0.847,0.988,0.988,0.988,0.486,0.012,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.812,0.988,0.988,0.988,0.988,0.698,0.455,0.141,0.016,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.051,0.365,0.561,0.475,0.09,0.024,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 2
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.149,0.169,0.412,1,0.992,0.992,0.992,0.992,0.992,0.682,0.024,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.169,0.545,0.878,0.886,0.988,0.992,0.988,0.988,0.988,0.988,0.988,0.988,0.62,0.055,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.698,0.988,0.988,0.988,0.988,0.992,0.988,0.988,0.988,0.988,0.988,0.988,0.988,0.231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.427,0.988,0.988,0.902,0.518,0.522,0.518,0.518,0.741,0.988,0.988,0.988,0.988,0.231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.016,0.114,0.114,0.094,0,0,0,0,0.055,0.886,0.988,0.988,0.675,0.027,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.333,0.953,0.988,0.988,0.565,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.345,0.741,0.988,0.988,0.988,0.055,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.357,0.831,0.969,0.988,0.988,0.988,0.8,0.035,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.125,0.49,0.757,0.757,0.757,0.992,0.988,0.988,0.988,0.933,0.4,0.11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.176,0.871,0.988,0.988,0.988,0.988,0.992,0.988,0.988,0.988,0.694,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.176,0.875,0.992,0.992,0.992,0.992,1,0.992,0.992,0.992,0.992,0.29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.122,0.482,0.204,0.173,0.173,0.173,0.173,0.561,0.988,0.988,0.29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.059,0.988,0.988,0.29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.337,0.988,0.988,0.29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.02,0.294,0.035,0,0,0,0,0,0,0.384,0.949,0.988,0.988,0.29,0,0,0,0,0,0,0,0,0,0,0,0,0,0.239,0.718,0.988,0.114,0,0,0,0,0.071,0.361,0.937,0.988,0.988,0.953,0.255,0,0,0,0,0,0,0,0,0,0,0,0,0,0.816,0.988,0.988,0.576,0.525,0.525,0.525,0.525,0.796,0.992,0.988,0.988,0.737,0.325,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.816,0.988,0.988,0.988,0.988,0.988,0.988,0.988,0.988,0.992,0.902,0.6,0.031,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.192,0.616,0.988,0.988,0.988,0.988,0.988,0.851,0.812,0.573,0.176,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.027,0.404,0.922,0.988,0.675,0.404,0.094,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 3
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.263,0.91,0.153,0,0,0,0,0,0,0,0,0,0.243,0.318,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.471,0.706,0.153,0,0,0,0,0,0,0,0,0,0.494,0.639,0,0,0,0,0,0,0,0,0,0,0,0,0,0.008,0.6,0.824,0.157,0,0,0,0,0,0,0,0,0,0.863,0.639,0,0,0,0,0,0,0,0,0,0,0,0,0,0.106,0.996,0.635,0,0,0,0,0,0,0,0,0,0,0.871,0.639,0,0,0,0,0,0,0,0,0,0,0,0,0,0.718,0.996,0.49,0,0,0,0,0,0,0,0,0,0.18,0.961,0.639,0,0,0,0,0,0,0,0,0,0,0,0,0,0.776,0.996,0.22,0,0,0,0,0,0,0,0,0,0.471,0.996,0.639,0,0,0,0,0,0,0,0,0,0,0,0,0.09,0.906,0.996,0.114,0,0,0,0,0,0,0,0,0,0.624,0.996,0.471,0,0,0,0,0,0,0,0,0,0,0,0,0.639,0.996,0.847,0.063,0,0,0,0,0,0,0,0,0,0.624,0.996,0.263,0,0,0,0,0,0,0,0,0,0.055,0.337,0.698,0.973,0.996,0.357,0,0,0,0,0,0,0,0,0,0,0.624,0.996,0.333,0,0,0,0.184,0.192,0.455,0.565,0.588,0.945,0.953,0.918,0.702,0.945,0.988,0.157,0,0,0,0,0,0,0,0,0,0,0.588,0.992,0.929,0.812,0.812,0.812,0.992,0.996,0.98,0.941,0.776,0.561,0.357,0.11,0.02,0.914,0.98,0,0,0,0,0,0,0,0,0,0,0,0,0.467,0.694,0.694,0.694,0.694,0.694,0.384,0.22,0,0,0,0,0,0.4,0.996,0.863,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.663,0.996,0.537,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.663,0.996,0.224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.663,0.996,0.224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.663,1,0.369,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.663,0.996,0.376,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.663,0.996,0.6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.663,1,0.6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.376,0.996,0.6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 4
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.012,0.071,0.071,0.071,0.494,0.533,0.686,0.102,0.651,1,0.969,0.498,0,0,0,0,0,0,0,0,0,0,0,0,0.118,0.141,0.369,0.604,0.667,0.992,0.992,0.992,0.992,0.992,0.882,0.675,0.992,0.949,0.765,0.251,0,0,0,0,0,0,0,0,0,0,0,0.192,0.933,0.992,0.992,0.992,0.992,0.992,0.992,0.992,0.992,0.984,0.365,0.322,0.322,0.22,0.153,0,0,0,0,0,0,0,0,0,0,0,0,0.071,0.859,0.992,0.992,0.992,0.992,0.992,0.776,0.714,0.969,0.945,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.314,0.612,0.42,0.992,0.992,0.804,0.043,0,0.169,0.604,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.055,0.004,0.604,0.992,0.353,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.545,0.992,0.745,0.008,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.043,0.745,0.992,0.275,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.137,0.945,0.882,0.627,0.424,0.004,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.318,0.941,0.992,0.992,0.467,0.098,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.176,0.729,0.992,0.992,0.588,0.106,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.063,0.365,0.988,0.992,0.733,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.976,0.992,0.976,0.251,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.18,0.51,0.718,0.992,0.992,0.812,0.008,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.153,0.58,0.898,0.992,0.992,0.992,0.98,0.714,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.094,0.447,0.867,0.992,0.992,0.992,0.992,0.788,0.306,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.09,0.259,0.835,0.992,0.992,0.992,0.992,0.776,0.318,0.008,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.071,0.671,0.859,0.992,0.992,0.992,0.992,0.765,0.314,0.035,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.216,0.675,0.886,0.992,0.992,0.992,0.992,0.957,0.522,0.043,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.533,0.992,0.992,0.992,0.831,0.529,0.518,0.063,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 5
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.149,0.871,0.882,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.576,0.918,0.988,0.69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.09,0.773,0.992,0.988,0.816,0.075,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.149,0.698,0.988,0.992,0.459,0.255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.224,0.988,0.988,0.992,0.349,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.149,0.871,0.992,0.992,0.31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.514,0.988,0.702,0.106,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.776,0.965,0.863,0.145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.31,0.992,0.988,0.529,0.11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.063,0.549,0.992,0.988,0.463,0,0,0,0,0.435,0.549,0.549,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.051,0.749,1,0.992,0.22,0,0,0.447,0.443,0.871,0.992,0.992,1,0.106,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.298,0.988,0.992,0.875,0.145,0,0.188,0.682,0.988,0.988,0.949,0.839,0.992,0.78,0.122,0,0,0,0,0,0,0,0,0,0,0,0,0.051,0.427,0.988,0.894,0.51,0,0.149,0.647,0.992,0.914,0.643,0.192,0.247,0.992,0.839,0.122,0,0,0,0,0,0,0,0,0,0,0,0,0.286,0.988,0.988,0.494,0,0.09,0.698,0.988,0.941,0.58,0.027,0.173,0.843,0.941,0.58,0,0,0,0,0,0,0,0,0,0,0,0,0,0.467,0.988,0.988,0,0,0.773,0.988,0.988,0.247,0,0.224,0.988,0.988,0.549,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.529,0.992,0.682,0,0.188,0.898,0.992,0.439,0,0.149,0.871,0.992,0.439,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.529,0.988,0.678,0,0.188,0.89,0.988,0.62,0.886,0.918,0.788,0.106,0.047,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.224,0.988,0.988,0.224,0.408,0.941,0.988,0.988,0.992,0.914,0.29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2,0.949,0.988,0.992,0.988,0.988,0.988,0.988,0.941,0.58,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.294,0.741,0.992,0.988,0.988,0.616,0.439,0.247,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 6
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.451,0.475,0.635,0.992,0.992,0.835,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.247,0.42,0.667,0.984,0.988,0.988,0.988,0.988,0.98,0.839,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.098,0.753,0.886,0.886,0.945,0.988,0.992,0.792,0.988,0.988,0.988,0.988,0.988,0.882,0,0,0,0,0,0,0,0,0,0,0,0,0,0.267,0.875,0.988,0.988,0.988,0.988,0.988,0.153,0.075,0.153,0.255,0.878,0.988,0.988,0.718,0,0,0,0,0,0,0,0,0,0,0,0,0,0.729,0.988,0.988,0.988,0.961,0.424,0.208,0,0,0,0.588,0.988,0.988,0.863,0.078,0,0,0,0,0,0,0,0,0,0,0,0,0.275,0.949,0.988,0.988,0.871,0.231,0,0,0,0,0,0.698,0.988,0.988,0.553,0,0,0,0,0,0,0,0,0,0,0,0,0,0.725,0.988,0.988,0.761,0.263,0,0,0,0,0.067,0.353,0.941,0.988,0.761,0.263,0,0,0,0,0,0,0,0,0,0,0,0,0,0.325,0.804,0.745,0.094,0,0,0,0,0,0.475,0.988,0.988,0.82,0.094,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.302,0.969,0.988,0.973,0.416,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.992,0.988,0.988,0.4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.525,1,0.992,0.992,0.153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.024,0.718,0.992,0.988,0.42,0.008,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.039,0.4,0.988,0.992,0.639,0.063,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.051,0.659,0.988,0.988,0.431,0.008,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.161,0.988,0.988,0.851,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.157,0.608,0.988,0.839,0.122,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.647,0.988,0.988,0.416,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.169,0.702,0.988,0.588,0.153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.537,0.988,0.867,0.153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.263,0.988,0.31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 7
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.043,0.796,0.898,0.125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.102,0.184,0.184,0.118,0.373,0.996,0.843,0.051,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.176,0.604,0.725,0.725,0.875,0.992,0.992,0.522,0.686,1,0.737,0.075,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.431,0.992,0.992,0.992,0.965,0.631,0.894,0.992,0.992,0.996,0.361,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.502,0.961,0.992,0.62,0.537,0.082,0,0.188,0.914,0.992,0.914,0.031,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.545,0.996,0.875,0.098,0,0,0.141,0.667,0.996,0.957,0.416,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.216,0.831,0.992,0.631,0.043,0.102,0.698,0.992,0.925,0.443,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.027,0.608,0.992,0.894,0.314,0.875,0.992,0.992,0.427,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.553,0.992,0.992,0.992,0.996,0.992,0.604,0.114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.431,0.992,0.992,0.992,0.996,0.702,0.149,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.012,0.671,0.996,0.996,0.996,0.702,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.671,0.992,0.992,0.992,0.992,0.698,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.102,0.482,0.996,0.992,0.796,0.612,0.992,0.784,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.365,0.992,0.996,0.475,0.051,0.365,0.992,0.62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.251,0.937,0.992,0.298,0.031,0.125,0.859,0.992,0.494,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.522,0.996,0.749,0,0.02,0.424,0.918,0.996,0.416,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.518,0.992,0.745,0.02,0.333,0.992,0.925,0.604,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.6,0.992,0.663,0.753,0.992,0.992,0.302,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.439,0.992,0.992,0.996,0.925,0.506,0.035,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.067,0.463,0.953,0.749,0.443,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], // 8
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.216,0.58,0.824,0.992,0.992,0.443,0.341,0.58,0.216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.341,0.91,0.988,0.992,0.741,0.824,0.988,0.988,0.992,0.659,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.016,0.224,0.949,0.988,0.745,0.255,0.02,0.047,0.714,0.988,0.992,0.455,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.376,0.988,0.988,0.718,0.055,0,0,0.361,0.988,0.988,0.882,0.082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.518,0.992,0.988,0.573,0.055,0,0,0,0.843,0.988,0.988,0.31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.494,0.992,0.969,0.69,0.035,0,0,0.031,0.306,0.961,0.992,0.506,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.063,0.91,0.988,0.69,0,0,0,0.141,0.788,0.988,0.988,0.663,0.043,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.086,0.988,0.988,0.118,0.086,0.467,0.773,0.945,0.992,0.988,0.984,0.302,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.063,0.906,0.988,0.992,0.988,0.988,0.988,0.886,0.89,0.988,0.906,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.216,0.922,0.992,0.851,0.541,0.165,0.094,0.753,0.988,0.561,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.243,1,0.992,0.427,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.278,0.992,0.988,0.082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.992,0.988,0.082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.278,0.992,0.988,0.082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.416,0.992,0.988,0.082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.176,1,0.992,0.082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.855,0.988,0.22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.376,0.988,0.741,0.165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.055,0.722,0.988,0.667,0.043,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.055,0.576,0.988,0.165,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0] // 9
		],
		render: function() {
			this.$el.empty();

			var template = _.template(PoolingTemplate);
			this.$el.append(template());

			this.drawImages();
		},
		onChangeClicked: function() {
			this.drawImages();
		},
		drawImages: function() {
			var image_number = Math.floor(Math.random()*this.mnist_digits.length);
			var image_data = this.mnist_digits[image_number];
			this.drawImage('input', this.mnist_digit_width, image_data);

			// Spatial extent: 2, stride: 2
			var img_2max14 = this.max_pooler_e2s2(image_data, this.mnist_digit_width);
			var img_2avg14 = this.avg_pooler_e2s2(image_data, this.mnist_digit_width);
			this.drawImage('output_2max14', 14, img_2max14);
			this.drawImage('output_2avg14', 14, img_2avg14);

			this.drawImage('output_2max7', 7, this.max_pooler_e2s2(img_2max14, 14));
			this.drawImage('output_2avg7', 7, this.avg_pooler_e2s2(img_2avg14, 14));

			// Spatial extent: 3, stride: 2
			var img_3max14 = this.max_pooler_e3s2(image_data, this.mnist_digit_width);
			var img_3avg14 = this.avg_pooler_e3s2(image_data, this.mnist_digit_width);

			this.drawImage('output_3max14', 14, img_3max14);
			this.drawImage('output_3avg14', 14, img_3avg14);

			this.drawImage('output_3max7', 7, this.max_pooler_e3s2(img_3max14, 14));
			this.drawImage('output_3avg7', 7, this.avg_pooler_e3s2(img_3avg14, 14));

			this.updateZoomedImages();
		},
		updateZoomedImages: function() {
			var _self = this, ids = $('.digit').map(function() {
				//return this.id;
				var output = document.getElementById(this.id + "_big");
				_self.drawZoomedImage(this.getContext("2d"), 14, 14, output.getContext("2d"), 140, 140)
			}); //.get();
			
			//var input = document.getElementById("output_2max14"), output = document.getElementById("zoom");
			//this.drawZoomedImage(input.getContext("2d"), 14, 14, output.getContext("2d"), 140, 140);
		},
		drawZoomedImage: function(source_ctx, sw, sh, target_ctx, tw, th) {
			var source = source_ctx.getImageData(0, 0, sw, sh);
			var sdata = source.data;

			var target = target_ctx.createImageData(tw, th);
			var tdata = target.data;

			var mapx = [];
			var ratiox = sw / tw, px = 0;
			for (var i = 0; i < tw; ++i) {
				mapx[i] = 4 * Math.floor(px);
				px += ratiox;
			}

			var mapy = [];
			var ratioy = sh / th, py = 0;
			for (var i = 0; i < th; ++i) {
				mapy[i] = 4 * sw * Math.floor(py);
				py += ratioy;
			}

			var tp = 0;
			for (py = 0; py < th; ++py) {
				for (px = 0; px < tw; ++px) {
					var sp = mapx[px] + mapy[py];
					tdata[tp++] = sdata[sp++];
					tdata[tp++] = sdata[sp++];
					tdata[tp++] = sdata[sp++];
					tdata[tp++] = sdata[sp++];
				}
			}

			target_ctx.putImageData(target, 0, 0);
		},
		max_pooler_e3s2: function(img_in, img_in_width) {
			var img_dum = [], img_out = [];

			// Add padding
			for (var i=0;i<img_in.length;i++) {
				if (i%img_in_width == img_in_width-1) {
					img_dum.push(0)
				}

				img_dum.push(img_in[i]);
			}
			img_dum.push(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
			img_in_width++;

			// Pooling
			var i = 0, within_row_counter = 0;
			while (i < (img_dum.length-2*img_in_width)) {
				img_out.push(Math.max(
					img_dum[i],
					img_dum[i+1],
					img_dum[i+2],
					img_dum[i+img_in_width],
					img_dum[i+img_in_width+1],
					img_dum[i+img_in_width+2],
					img_dum[i+2*img_in_width],
					img_dum[i+2*img_in_width+1],
					img_dum[i+2*img_in_width+2],
				));
				within_row_counter+=2;

				i+=2;
				if (within_row_counter == img_in_width-1) {
					i+= img_in_width*2+1;
					within_row_counter = 0;
				}
			}

			return img_out;
		},
		avg_pooler_e3s2: function(img_in, img_in_width) {
			var img_dum = [], img_out = [];

			// Add padding
			for (var i=0;i<img_in.length;i++) {
				if (i%img_in_width == img_in_width-1) {
					img_dum.push(0)
				}

				img_dum.push(img_in[i]);
			}
			img_dum.push(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
			img_in_width++;

			// Pooling
			var i = 0, within_row_counter = 0;
			while (i < (img_dum.length-2*img_in_width)) {
				img_out.push((
					img_dum[i]+
					img_dum[i+1]+
					img_dum[i+2]+
					img_dum[i+img_in_width]+
					img_dum[i+img_in_width+1]+
					img_dum[i+img_in_width+2]+
					img_dum[i+2*img_in_width]+
					img_dum[i+2*img_in_width+1]+
					img_dum[i+2*img_in_width+2]
				)/9);
				within_row_counter+=2;

				i+=2;
				if (within_row_counter == img_in_width-1) {
					i+= img_in_width*2+1;
					within_row_counter = 0;
				}
			}

			return img_out;
		},
		max_pooler_e2s2: function(img_in, img_in_width) {
			var img_out = [], i = 0;

			while (i < img_in.length-img_in_width) {
				img_out.push(Math.max(
					img_in[i]+
					img_in[i+1]+
					img_in[i+img_in_width]+
					img_in[i+img_in_width+1]
				));

				i+=2;
				if (i%img_in_width == 0) {
					i+= img_in_width;
				}
			}

			return img_out;
		},
		avg_pooler_e2s2: function(img_in, img_in_width) {
			var img_out = [], i = 0;

			while (i < img_in.length-img_in_width) {
				img_out.push((
					img_in[i]+
					img_in[i+1]+
					img_in[i+img_in_width]+
					img_in[i+img_in_width+1]
				)/4);

				i+=2;
				if (i%img_in_width == 0) {
					i+= img_in_width;
				}
			}

			return img_out;
		},
		drawImage: function(target_id, size, img_data) {
			var canvas = document.getElementById(target_id);
			canvas.width = canvas.height = size;
			var ctx = canvas.getContext("2d");
			var canvasData = ctx.getImageData(0, 0, canvas.width, canvas.height);

			var img_pos = 0;
			for (var i = 0; i < img_data.length; i++) {
				var color = img_data[i] * 255;
				canvasData.data[img_pos * 4 + 0] = 255-color;
				canvasData.data[img_pos * 4 + 1] = 255-color;
				canvasData.data[img_pos * 4 + 2] = 255-color;
				canvasData.data[img_pos * 4 + 3] = 255;
				img_pos++;
			}

			ctx.putImageData(canvasData, 0, 0);
		},
		destroy: function() {
			this.undelegateEvents();
			this.$el.empty();
			this.stopListening();
			return this;
		}
	});

	return view;
});